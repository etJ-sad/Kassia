<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kassia - Windows Image Preparation System | Siemens</title>

    <!-- Siemens Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.c2comms.cloud/images/favicons/1.0/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn.c2comms.cloud/images/favicons/1.0/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn.c2comms.cloud/images/favicons/1.0/favicon-16x16.png">
    <link rel="shortcut icon" href="https://cdn.c2comms.cloud/images/favicons/1.0/favicon.ico">

    <!-- Siemens Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- CSS Files -->
    <link rel="stylesheet" href="/static/css/variables.css">
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/components.css">
    <link rel="stylesheet" href="/static/css/layout.css">
    <link rel="stylesheet" href="/static/css/responsive.css">
</head>
<body>
    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status status-offline">
        <span data-translate="connection_connecting">🔌 Connecting...</span>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Siemens Header -->
    <header class="siemens-header">
        <!-- Main Header -->
        <div class="header-main">
            <div class="header-main-content">
                <a href="#" class="siemens-logo">
                    <div class="logo-icon">S</div>
                    <span>SIEMENS</span>
                </a>

                <div class="header-search">
                    <div class="search-container">
                        <input type="text" class="search-input" data-translate-placeholder="search_placeholder" placeholder="Search Kassia documentation..." id="headerSearch">
                    </div>
                </div>

                <div class="language-selector">
                    <button class="lang-btn active" onclick="switchLanguage('en')">EN</button>
                    <button class="lang-btn" onclick="switchLanguage('de')">DE</button>
                    <button class="lang-btn" onclick="switchLanguage('ru')">RU</button>
                    <button class="lang-btn" onclick="switchLanguage('cs')">CS</button>
                </div>
            </div>
        </div>

        <!-- Main Navigation -->
        <div class="main-navigation">
            <div class="nav-content">
                <div class="nav-item active" onclick="switchTab('dashboard')">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
                        <path d="M6 1v3H1V1h5zM1 0a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H1zm14 12v3h-5v-3h5zm-5-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-5zM6 8v7H1V8h5zM1 7a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H1zm14-6v7h-5V1h5zm-5-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1h-5z"/>
                    </svg>
                    <span data-translate="nav_dashboard">Dashboard</span>
                </div>
                <div class="nav-item" onclick="switchTab('build')">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
                        <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
                    </svg>
                    <span data-translate="nav_build">New Build</span>
                </div>
                <div class="nav-item" onclick="switchTab('assets')">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
                        <path d="M1.5 0A1.5 1.5 0 0 0 0 1.5v13A1.5 1.5 0 0 0 1.5 16h13a1.5 1.5 0 0 0 1.5-1.5v-13A1.5 1.5 0 0 0 14.5 0h-13z"/>
                    </svg>
                    <span data-translate="nav_assets">Assets</span>
                </div>
                <div class="nav-item" onclick="switchTab('jobs')">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
                        <path d="M7 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-1z"/>
                    </svg>
                    <span data-translate="nav_jobs">Jobs</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">Kassia</h1>
            <div class="hero-subtitle" data-translate="hero_subtitle">Windows Image Preparation System</div>
            <div class="hero-description" data-translate="hero_description">
                Advanced automation platform for Windows image customization and deployment.
                Built with enterprise-grade reliability and Siemens engineering excellence.
            </div>
            <div class="hero-cta" onclick="switchTab('build')">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
                </svg>
                <span data-translate="hero_cta">Start Building</span>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="dashboard" onclick="switchTab('dashboard')">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M6 1v3H1V1h5zM1 0a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H1z"/>
                </svg>
                <span data-translate="nav_dashboard">Dashboard</span>
            </button>
            <button class="tab-btn" data-tab="build" onclick="switchTab('build')">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
                </svg>
                <span data-translate="nav_build">New Build</span>
            </button>
            <button class="tab-btn" data-tab="assets" onclick="switchTab('assets')">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M1.5 0A1.5 1.5 0 0 0 0 1.5v13A1.5 1.5 0 0 0 1.5 16h13a1.5 1.5 0 0 0 1-1.5v-13A1.5 1.5 0 0 0 14.5 0h-13z"/>
                </svg>
                <span data-translate="nav_assets">Assets</span>
            </button>
            <button class="tab-btn" data-tab="jobs" onclick="switchTab('jobs')">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M7 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-1z"/>
                </svg>
                <span data-translate="nav_jobs">Jobs</span>
            </button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="content-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 12px;">
                            <path d="M6 1v3H1V1h5zM1 0a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H1z"/>
                        </svg>
                        <span data-translate="dashboard_system_overview">System Overview</span>
                    </h2>
                </div>
                <div class="card-content">
                    <div class="status-grid">
                        <div class="status-card">
                            <span class="status-number" id="totalJobs">0</span>
                            <div class="status-label" data-translate="stats_total_jobs">Total Jobs</div>
                        </div>
                        <div class="status-card">
                            <span class="status-number" id="runningJobs">0</span>
                            <div class="status-label" data-translate="stats_running">Running</div>
                        </div>
                        <div class="status-card">
                            <span class="status-number" id="completedJobs">0</span>
                            <div class="status-label" data-translate="stats_completed">Completed</div>
                        </div>
                        <div class="status-card">
                            <span class="status-number" id="failedJobs">0</span>
                            <div class="status-label" data-translate="stats_failed">Failed</div>
                        </div>
                    </div>

                    <!-- Active Job Display -->
                    <div id="activeJobCard" class="content-card" style="display: none;">
                        <div class="card-header">
                            <h3 class="card-title" data-translate="active_job_title">Active Job</h3>
                        </div>
                        <div class="card-content">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                <div>
                                    <strong data-translate="job_label">Job:</strong> <span id="activeJobTitle">-</span><br>
                                    <strong data-translate="status_label">Status:</strong> <span id="activeJobStatus" class="status-badge">-</span>
                                </div>
                                <div>
                                    <strong data-translate="progress_label">Progress:</strong> <span id="activeJobProgress">0%</span><br>
                                    <strong data-translate="step_label">Step:</strong> <span id="activeJobStep">-</span>
                                </div>
                            </div>
                            <div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 10px; height: 100px; overflow-y: auto; font-family: monospace; font-size: 14px;" id="activeJobLogs">
                                <span data-translate="waiting_job_updates">Waiting for job updates...</span>
                            </div>
                            <div style="width: 100%; height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden; margin-top: 15px;">
                                <div id="activeJobProgressBar" style="height: 100%; background: var(--siemens-bright-petrol); transition: width 0.3s ease; width: 0%;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title" data-translate="recent_jobs_title">Recent Jobs</h3>
                        </div>
                        <div class="card-content">
                            <div id="recentJobsList">
                                <p style="text-align: center; color: var(--siemens-text-secondary); padding: 40px;" data-translate="no_jobs_yet">
                                    No jobs yet. Start a new build to see activity here.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Build Tab -->
        <div id="build" class="tab-content">
            <div class="content-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 12px;">
                            <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
                        </svg>
                        <span data-translate="build_create_new">Create New Build</span>
                    </h2>
                </div>
                <div class="card-content">
                    <form id="buildForm">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                            <div class="form-group">
                                <label class="form-label" for="deviceSelect" data-translate="build_device_config">Device Configuration</label>
                                <select id="deviceSelect" class="form-control" required>
                                    <option value="" data-translate="select_device">Select device...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="osSelect" data-translate="build_operating_system">Operating System</label>
                                <select id="osSelect" class="form-control" disabled required>
                                    <option value="" data-translate="select_os">Select OS...</option>
                                </select>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                            <div>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" id="skipDrivers">
                                    <span data-translate="skip_drivers">Skip driver integration</span>
                                </label>
                            </div>
                            <div>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" id="skipUpdates">
                                    <span data-translate="skip_updates">Skip update integration</span>
                                </label>
                            </div>
                        </div>

                        <div id="buildPreview" style="display: none; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin-bottom: 24px;">
                            <h4 style="margin-bottom: 15px;" data-translate="build_preview">Build Preview</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; font-size: 14px;">
                                <div><strong data-translate="device_label">Device:</strong> <span id="previewDevice">-</span></div>
                                <div><strong data-translate="os_label">OS:</strong> <span id="previewOS">-</span></div>
                                <div><strong data-translate="wim_path_label">WIM Path:</strong> <span id="previewWimPath">-</span></div>
                                <div><strong data-translate="sbi_label">SBI:</strong> <span id="previewSBI">-</span></div>
                                <div><strong data-translate="drivers_label">Drivers:</strong> <span id="previewDrivers">-</span></div>
                                <div><strong data-translate="updates_label">Updates:</strong> <span id="previewUpdates">-</span></div>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary" id="startBuildBtn">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
                            </svg>
                            <span data-translate="start_build">Start Build</span>
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Assets Tab -->
        <div id="assets" class="tab-content">
            <div class="content-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 12px;">
                            <path d="M1.5 0A1.5 1.5 0 0 0 0 1.5v13A1.5 1.5 0 0 0 1.5 16h13a1.5 1.5 0 0 0 1.5-1.5v-13A1.5 1.5 0 0 0 14.5 0h-13z"/>
                        </svg>
                        <span data-translate="asset_management">Asset Management</span>
                    </h2>
                </div>
                <div class="card-content">
                    <div style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 16px; margin-bottom: 32px;">
                        <div class="form-group">
                            <label class="form-label" for="assetDeviceFilter" data-translate="device_filter">Device Filter</label>
                            <select id="assetDeviceFilter" class="form-control">
                                <option value="" data-translate="all_devices">All Devices</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="assetOSFilter" data-translate="os_filter">OS Filter</label>
                            <select id="assetOSFilter" class="form-control">
                                <option value="" data-translate="all_os">All OS</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">&nbsp;</label>
                            <button type="button" class="btn btn-secondary" onclick="refreshAssets()">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                                </svg>
                                <span data-translate="refresh">Refresh</span>
                            </button>
                        </div>
                    </div>

                    <div id="assetsContent">
                        <p style="text-align: center; color: var(--siemens-text-secondary); padding: 40px;" data-translate="select_device_os_assets">
                            Select device and OS to view available assets
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Jobs Tab -->
        <div id="jobs" class="tab-content">
            <div class="content-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 12px;">
                            <path d="M7 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-1z"/>
                        </svg>
                        <span data-translate="build_jobs">Build Jobs</span>
                        <button class="btn btn-secondary" onclick="refreshJobs()" style="margin-left: auto; padding: 8px 16px; font-size: 14px;">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            </svg>
                            <span data-translate="refresh">Refresh</span>
                        </button>
                    </h2>
                </div>
                <div class="card-content">
                    <div id="jobsList">
                        <p style="text-align: center; color: var(--siemens-text-secondary); padding: 40px;" data-translate="no_build_jobs">
                            No build jobs found. Start your first build to see it here.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="/static/js/translations.js"></script>
    <script src="/static/js/websocket.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/ui.js"></script>
    <script src="/static/js/kassia-app.js"></script>
    
    <script>
        // Initialize the application when all scripts are loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Initializing Kassia WebUI Application...');
            
            // Wait a bit for all managers to be ready
            setTimeout(() => {
                if (window.KassiaApp) {
                    window.kassiaApp = new window.KassiaApp();
                } else {
                    console.error('❌ KassiaApp class not found');
                }
            }, 100);
        });
    </script>
</body>
</html>